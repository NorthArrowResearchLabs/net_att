(this["webpackJsonp@netatt/app"]=this["webpackJsonp@netatt/app"]||[]).push([[0],{205:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.api=r(n(665)),t.graphql=r(n(683));var i=n(684);Object.defineProperty(t,"typeDefs",{enumerable:!0,get:function(){return i.default}})},517:function(e,t,n){e.exports=n(762)},665:function(e,t,n){"use strict";var a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.authCheck=t.apiCall=void 0;var r,i=o(n(666)),c=n(760),l=o(n(282)),s=o(n(37));t.apiCall=function(e,t,n,a){return i.default({url:e,method:"post",headers:t?{authorization:"Bearer "+t}:null,data:{query:c.print(n),variables:a}}).then((function(e){return e.data})).catch((function(o){throw o.response&&404===o.response.status?new Error("API Url not found: "+e):o.code&&"ECONNREFUSED"===o.code?new Error("Connection refused. Could not contact: '"+e+"'"):(s.default.error({url:e,jwt:t,query:c.print(n),variables:a}),o)}))},t.authCheck=function(e,n){return t.apiCall(e,n,l.default(r||(r=a(["\n            query AuthCall {\n                auth {\n                    loggedIn\n                    userPool\n                    clientId\n                    region\n                }\n            }\n        "],["\n            query AuthCall {\n                auth {\n                    loggedIn\n                    userPool\n                    clientId\n                    region\n                }\n            }\n        "]))),{})}},683:function(e,t,n){"use strict";var a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.queries=t.fragments=void 0;var r,i,c,l,s,d=o(n(282));t.fragments={record:d.default(r||(r=a(["\n        fragment recordFragment on Record {\n            id\n            ds\n            catchGeom {\n                geom\n                bbox\n            }\n            reachGeom {\n                bbox\n            }\n            data\n            __typename\n        }\n    "],["\n        fragment recordFragment on Record {\n            id\n            ds\n            catchGeom {\n                geom\n                bbox\n            }\n            reachGeom {\n                bbox\n            }\n            data\n            __typename\n        }\n    "])))},t.queries={geoRecord:d.default(i||(i=a(["\n        query geoRecord($lngLat: [Float]!) {\n            geoRecord(lngLat: $lngLat) {\n                ...recordFragment\n            }\n        }\n        ","\n    "],["\n        query geoRecord($lngLat: [Float]!) {\n            geoRecord(lngLat: $lngLat) {\n                ...recordFragment\n            }\n        }\n        ","\n    "])),t.fragments.record),record:d.default(c||(c=a(["\n        query record($id: ID!) {\n            record(id: $id) {\n                ...recordFragment\n            }\n        }\n        ","\n    "],["\n        query record($id: ID!) {\n            record(id: $id) {\n                ...recordFragment\n            }\n        }\n        ","\n    "])),t.fragments.record),geoRecordEPSG:d.default(l||(l=a(["\n        query geoRecordEPSG($lngLat: [Float]!, $epsg: Int!) {\n            geoRecordEPSG(lngLat: $lngLat, epsg: $epsg) {\n                ...recordFragment\n            }\n        }\n        ","\n    "],["\n        query geoRecordEPSG($lngLat: [Float]!, $epsg: Int!) {\n            geoRecordEPSG(lngLat: $lngLat, epsg: $epsg) {\n                ...recordFragment\n            }\n        }\n        ","\n    "])),t.fragments.record),upstreamCatchment:d.default(s||(s=a(["\n        query upstreamCatchment($id: ID!) {\n            upstreamCatchment(id: $id)\n        }\n    "],["\n        query upstreamCatchment($id: ID!) {\n            upstreamCatchment(id: $id)\n        }\n    "])))}},684:function(e,t,n){"use strict";var a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r,i=o(n(282)).default(r||(r=a(["\n    # Check out the cheat sheet:\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\n\n    schema {\n        query: Query\n        # mutation: Mutation\n    }\n\n    type Query {\n        auth: AuthParams\n\n        geoRecord(lngLat: [Float]!): Record\n        geoRecordEPSG(lngLat: [Float]!, epsg: Int!): Record\n        upstreamCatchment(id: ID!): RecordGeometry\n\n        record(id: ID!, ds: [String]): Record\n        records(ids: [ID]!, ds: [String]): [RecordSet]\n    }\n\n    # this schema allows the following mutation:\n    # type Mutation {\n    # signal a deletion of a record\n    # insertRecords(id: [ID]!, ds: String!): [Record]!\n    # deleteRecords(id: [ID]!, ds: String!): [ID]!\n    # wipeDS(ds: String!): String\n    # }\n\n    type RecordGeometry {\n        geom: String\n        bbox: String\n    }\n\n    type AuthParams {\n        loggedIn: Boolean\n        userPool: String\n        clientId: String\n        region: String\n    }\n\n    type RecordSet {\n        id: ID!\n        records: [Record]\n    }\n\n    type Record {\n        id: ID!\n        ds: String\n        catchGeom: RecordGeometry\n        reachGeom: RecordGeometry\n        data: String\n    }\n"],["\n    # Check out the cheat sheet:\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\n\n    schema {\n        query: Query\n        # mutation: Mutation\n    }\n\n    type Query {\n        auth: AuthParams\n\n        geoRecord(lngLat: [Float]!): Record\n        geoRecordEPSG(lngLat: [Float]!, epsg: Int!): Record\n        upstreamCatchment(id: ID!): RecordGeometry\n\n        record(id: ID!, ds: [String]): Record\n        records(ids: [ID]!, ds: [String]): [RecordSet]\n    }\n\n    # this schema allows the following mutation:\n    # type Mutation {\n    # signal a deletion of a record\n    # insertRecords(id: [ID]!, ds: String!): [Record]!\n    # deleteRecords(id: [ID]!, ds: String!): [ID]!\n    # wipeDS(ds: String!): String\n    # }\n\n    type RecordGeometry {\n        geom: String\n        bbox: String\n    }\n\n    type AuthParams {\n        loggedIn: Boolean\n        userPool: String\n        clientId: String\n        region: String\n    }\n\n    type RecordSet {\n        id: ID!\n        records: [Record]\n    }\n\n    type Record {\n        id: ID!\n        ds: String\n        catchGeom: RecordGeometry\n        reachGeom: RecordGeometry\n        data: String\n    }\n"])));t.default=i},695:function(e,t){},697:function(e,t){},756:function(e,t,n){},762:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(39),i=n.n(r),c=n(497),l=n(55),s=n(128),d=n(470),u=n(205),p=n(435),m=n(162),g=n(438),h=n(439),b=n(433),f=n(437),y=n(501),_=n(140),v=n(6),E=n(491),O=n.n(E),w=n(21),S=n(37),R=n.n(S);const P="pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",C="https://64ggxqpm82.execute-api.us-west-2.amazonaws.com/prod/api",j=(Object({NODE_ENV:"production",PUBLIC_URL:"/net_att",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_RS_TILES_CDN:"https://d2hsyhl6qlaiyu.cloudfront.net",REACT_APP_RS_CDN:"https://d18emzkyqtselk.cloudfront.net",REACT_APP_GRAPHQL:"https://64ggxqpm82.execute-api.us-west-2.amazonaws.com/prod/api",REACT_APP_AWS_REGION:"us-west-2",REACT_APP_COGNITO_USER_POOL_ID:"us-west-2_e7COHULVp",REACT_APP_COGNITO_CLIENT_ID:"4j2m8a80sd7l7mu5a9g7udq6bg",REACT_APP_HOSTED_DOMAIN:"riverscapes-dev.auth.us-west-2.amazoncognito.com",REACT_APP_VERSION:"0.1.10",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com"}).REACT_APP_CDN,{REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_VERSION:"0.1.10",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com",REACT_APP_GRAPHQL:"https://64ggxqpm82.execute-api.us-west-2.amazonaws.com/prod/api"});Object.keys(j).forEach(e=>{j[e]||R.a.error("You must set environment variable: ".concat(e))});Object({NODE_ENV:"production",PUBLIC_URL:"/net_att",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_RS_TILES_CDN:"https://d2hsyhl6qlaiyu.cloudfront.net",REACT_APP_RS_CDN:"https://d18emzkyqtselk.cloudfront.net",REACT_APP_GRAPHQL:"https://64ggxqpm82.execute-api.us-west-2.amazonaws.com/prod/api",REACT_APP_AWS_REGION:"us-west-2",REACT_APP_COGNITO_USER_POOL_ID:"us-west-2_e7COHULVp",REACT_APP_COGNITO_CLIENT_ID:"4j2m8a80sd7l7mu5a9g7udq6bg",REACT_APP_HOSTED_DOMAIN:"riverscapes-dev.auth.us-west-2.amazoncognito.com",REACT_APP_VERSION:"0.1.10",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com"}).REACT_APP_GA_TOKEN;const I=new URL("/net_att/",window.location.origin),T={Auth:{region:"us-west-2",userPoolId:"us-west-2_e7COHULVp",userPoolWebClientId:"4j2m8a80sd7l7mu5a9g7udq6bg",mandatorySignIn:!0,oauth:{domain:"riverscapes-dev.auth.us-west-2.amazoncognito.com",scope:["email","profile","openid"],redirectSignIn:I.toString(),redirectSignOut:I.toString(),responseType:"code"}}},A=Object(p.a)(e=>({root:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(0,1),textShadow:"3px 3px 3px rgba(0,0,0,0.7)",backgroundImage:"url(https://northarrowresearchlabs.github.io/riverscapes/HeaderBackground.png)",backgroundRepeat:"no-repeat",backgroundPosition:"0% 50%",backgroundSize:"cover",backgroundColor:"#444444"},version:{paddingLeft:e.spacing(1)},logo:{height:40,width:40,marginRight:e.spacing(2)},programChooser:{margin:e.spacing(0,1),color:e.palette.primary.contrastText,"& svg":{color:e.palette.primary.contrastText},"&:before":{borderColor:e.palette.primary.contrastText},"&:after":{borderColor:e.palette.primary.contrastText}},transparent:{backgroundColor:"transparent",background:"none",color:e.palette.text.primary},search:{position:"relative",border:"1px solid white",borderRadius:e.shape.borderRadius,backgroundColor:Object(w.d)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(w.d)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,flexGrow:1,maxWidth:"20rem",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(3),width:"auto"}},searchError:{border:"1px solid red"},searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},spacer:{flexGrow:1},inputInput:{padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:200}},sectionDesktop:{display:"none",[e.breakpoints.up("sm")]:{display:"flex",flexGrow:1}},sectionMobile:{display:"flex",flexGrow:1,[e.breakpoints.up("sm")]:{display:"none"}}})),N={text:""};var k=({title:e,searchSubmit:t,signOut:n})=>{const r=A(),i=Object(a.useState)(N),c=Object(s.a)(i,2),d=c[0],u=c[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{position:"static"},o.a.createElement(g.a,{className:r.root,disableGutters:!0},o.a.createElement("a",{href:"http://riverscapes.xyz/"},o.a.createElement("img",{className:r.logo,src:"https://riverscapes.xyz/assets/images/RiverscapesLogo.png",alt:"logo"})),o.a.createElement(b.a,{variant:"subtitle1"},e),o.a.createElement(b.a,{variant:"overline",className:r.version},"v.","0.1.10"),o.a.createElement("div",{className:r.spacer}),d.error&&o.a.createElement(b.a,{variant:"subtitle1",color:"error"},d.error),o.a.createElement("div",{className:Object(v.default)(r.search,{[r.searchError]:Boolean(d.error)})},o.a.createElement("div",{className:r.searchIcon},o.a.createElement(O.a,null)),o.a.createElement(y.a,{placeholder:"NHDPlusID\u2026 (55000600125036)",onKeyDown:e=>{var n;"Enter"===e.key&&(R.a.debug("searchSubmitHandle ENTER DETECTED",e),(n=d.text)&&n.length>0&&_.util.isNumeric(n)?(u(Object(l.a)(Object(l.a)({},d),{},{error:void 0})),R.a.debug("searchSubmitHandle called",n),t(parseInt(n,10)).then(()=>{u(N)})):(R.a.debug("searchSubmitHandle ERROR non numeric"),u(Object(l.a)(Object(l.a)({},d),{},{error:"Non-Numberic nhdid"}))))},value:d.text,onChange:e=>u(Object(l.a)(Object(l.a)({},d),{},{text:e.target.value})),classes:{root:r.inputRoot,input:r.inputInput},inputProps:{"aria-label":"search"}})),o.a.createElement(f.a,{color:"inherit",onClick:()=>n()},"Sign Out"))))},x=n(99),L=n(193),D=n(181),F=n(493),G=n.n(F),M=n(495),q=n.n(M),B=n(494),H=n.n(B);const z=Object(p.a)(e=>({root:{},icon:{zIndex:100,width:20,height:20,position:"absolute",top:"50%",left:"50%",textAlign:"center",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"}}));var W=({latLng:e,Icon:t,align:n})=>{const a=z(),r={};if(n){switch(n[0]){case"bottom":r.transform="translateY(-100%)";break;case"top":r.transform="translateY(0%)";break;case"center":r.transform="translateY(-50%)";break;default:throw new Error("Must specify vertical placement of align")}switch(n[1]){case"left":r.transform+=" translateX(0%)";break;case"right":r.transform+=" translateX(-100%)";break;case"center":r.transform+=" translateX(-50%)";break;default:throw new Error("Must specify horizontal placement of align")}}return o.a.createElement(x.Marker,{className:a.root,longitude:e[0],latitude:e[1]},o.a.createElement("div",{className:a.root},o.a.createElement(t,{className:a.icon,style:r})))};const Y={lngLat:[-114.374749399575,44.2983897312401]};var $=({vectorTiles:e,clickMarker:t,handleMapClick:n})=>{const r=Object(a.useState)(0),i=Object(s.a)(r,2),c=i[0],d=i[1],u=Object(a.useState)(Y),p=Object(s.a)(u,2),m=p[0],g=p[1],h=Object(a.useRef)(),b=Object(a.useRef)(),f=Object(a.useState)(),y=Object(s.a)(f,2),v=y[0],E=y[1],O=Object(a.useMemo)(()=>e?Object(D.combineStyles)(D.MapStyles[c].style,(e=>{R.a.info("VECTORTILES",e);const t=Object.keys(e).reduce((t,n)=>{const a=e[n];return Object(l.a)(Object(l.a)({},t),{},{[a.sourceName]:{tiles:[a.url],type:"vector",minzoom:a.minZoom,maxzoom:a.maxZoom,bounds:a.bounds}})},{}),n=[{id:"NHDFlowlines_lines",type:"line",source:e.NHDFlowline.sourceName,"source-layer":"NHDFlowlines",minzoom:e.NHDFlowline.minZoom,maxzoom:16.5,layout:{visibility:"visible"},paint:{"line-opacity":["interpolate",["linear"],["zoom"],e.NHDFlowline.minZoom,0,8,1],"line-width":["interpolate",["linear"],["zoom"],e.NHDFlowline.minZoom,.5,16,3],"line-color":["match",["get","NHDPlusID"],[-1],"#FFFF00",["step",["get","FType"],"#FF0000",460,"#0000FF"]]}}];return{version:8,name:"Outdoors",metadata:{"mapbox:type":"default","mapbox:origin":"outdoors-v11","mapbox:autocomposite":!0,"mapbox:groups":{},"mapbox:sdk-support":{js:"0.50.0",android:"6.7.0",ios:"4.6.0"}},sources:Object(l.a)({},t),sprite:"mapbox://sprites/pipbailey/cjvfq2uwm0vqk1foby0dtwdmk/ayuihl2d38ufkjhmu0pwx0cto",glyphs:"mapbox://fonts/pipbailey/{fontstack}/{range}.pbf",layers:[...n],created:"2019-05-08T21:16:06.811Z",id:"cjvfq2uwm0vqk1foby0dtwdmk",modified:"2019-05-08T22:02:34.939Z",owner:"pipbailey",visibility:"private",draft:!1}})(e)):null,[c,e]);Object(a.useLayoutEffect)(()=>{if(t){if((null===t||void 0===t?void 0:t.reachBBox)&&h.current){const e=h.current,n=e.getLayer("NHDFlowlines_lines"),a=n.getPaintProperty("line-color");a[2]=[parseInt(null===t||void 0===t?void 0:t.jsonData.nhdplusid,10)],R.a.debug("line-color",a,n),e.setPaintProperty("NHDFlowlines_lines","line-color",a)}if((null===t||void 0===t?void 0:t.catchBBox)||(null===t||void 0===t?void 0:t.reachBBox)){const e=(null===t||void 0===t?void 0:t.catchBBox)||(null===t||void 0===t?void 0:t.reachBBox);if(!e.coordinates)return void R.a.error("coordinates missing");const n=[Math.min(...e.coordinates[0].map(e=>e[0])),Math.min(...e.coordinates[0].map(e=>e[1])),Math.max(...e.coordinates[0].map(e=>e[0])),Math.max(...e.coordinates[0].map(e=>e[1]))];if(4===n.length&&n.every(_.util.isNumeric)){const e=[(n[0]+n[2])/2,(n[1]+n[3])/2];b.current&&n.every((e,t)=>!b.current||e===b.current[t])||(b.current=n,E({transitionDuration:2e3,transitionInterpolator:new x.FlyToInterpolator,transitionEasing:L.b}),g({bounds:n,lngLat:e}),R.a.debug("Mapbounds Set",{clickMarker:t}))}}}},[t]);const w=Object(a.useMemo)(()=>{const e=[],n=t&&t.intLngLat?{type:"Feature",properties:{percentile:0},geometry:{type:"LineString",coordinates:[t.lngLat,t.intLngLat]}}:null,a=t&&t.catchGeo?{type:"Feature",properties:{},geometry:t.catchGeo}:null;return t&&t.lngLat&&e.push(o.a.createElement(W,{key:"ch_clickMarker",latLng:t.lngLat,Icon:t.loading?G.a:H.a,align:["bottom","center"]})),t&&t.intLngLat&&e.push(o.a.createElement(W,{latLng:t.intLngLat,Icon:q.a})),n&&e.push(o.a.createElement(x.Source,{type:"geojson",data:n,key:"ch_connect_line"},o.a.createElement(x.Layer,{id:"connect_line",type:"line",paint:{"line-color":"#FF0090","line-opacity":1,"line-width":["interpolate",["linear"],["zoom"],8,.5,16,3]}}))),a&&e.push(o.a.createElement(x.Source,{type:"geojson",data:a,key:"ch_upstream_fill"},o.a.createElement(x.Layer,{id:"upstream_fill",type:"fill",paint:{"fill-opacity":["interpolate",["linear"],["zoom"],6,.5,16,.2],"fill-color":"#9933ff"}}))),a&&e.push(o.a.createElement(x.Source,{type:"geojson",data:a,key:"ch_upstream_line"},o.a.createElement(x.Layer,{id:"upstream_line",type:"line",paint:{"line-color":"#9933ff","line-opacity":1,"line-width":1}}))),e},[t]),S=Object(a.useMemo)(()=>o.a.createElement(D.StyleButtons,{controlPadding:{},currStyle:c,mapStyles:D.MapStyles,setCurrStyle:e=>d(e)}),[c]);return R.a.debug("DEBUGGING",w),o.a.createElement(D.BaseMap,{mapBoxToken:P,reactMapGLProps:{clickRadius:2,maxZoom:16,minZoom:6,onClick:n},bounds:m.bounds,showMe:!0,viewport:{longitude:m.lngLat[0],latitude:m.lngLat[1]},mapStyles:[{style:O}],transition:v,onTransitionStart:()=>{R.a.debug("onTransition START")},onTransitionEnd:()=>{R.a.debug("onTransition END"),E(null)}},[S,...w])},V=n(313),U=n(814),J=n(815),K=n(816),Q=n(817),X=n(818),Z=n(819),ee=n(293),te=n.n(ee);const ne=["ogc_fid","enabled","wbarea_permanent_identifier","visibilityfilter","gnis_id","gnis_name"],ae=["nhdplusid","vpuid","reachcode","permanent_identifier","fromnode","tonode","hydroseq","levelpathi","terminalpa","dnlevelpat","dnhydroseq"],oe=Object(p.a)(e=>({root:{height:"100%",overflow:"scroll","& *":{userSelect:"text"}},table:{},tableHead:{},tableBody:{},tableCell:{}}));var re=({data:e})=>{const t=oe();return o.a.createElement(Q.a,{component:V.a,className:t.root},o.a.createElement(U.a,{className:t.table,"aria-label":"simple table"},o.a.createElement(X.a,{className:t.tableHead},o.a.createElement(Z.a,null,o.a.createElement(K.a,{className:t.tableCell},"Field"),o.a.createElement(K.a,{align:"right",className:t.tableCell},"Value"))),o.a.createElement(J.a,{className:t.tableBody},Object.keys(e).filter(e=>-1===ne.indexOf(e)).map((n,a)=>o.a.createElement(Z.a,{key:"".concat(n,"-").concat(a)},o.a.createElement(K.a,{component:"th",scope:"row",className:t.tableCell},n.replace(/_/g," ")),o.a.createElement(K.a,{align:"right",className:t.tableCell},function(e,t){return null===t||void 0===t?o.a.createElement("em",null,"n/a"):ae.indexOf(e)>-1?o.a.createElement("code",null,t):_.util.isNumeric(t)?"spheroid_dist"===e?te()(t).format("0.00000"):_.util.formatNum(t):t.toString()}(n,e[n])))))))};const ie=Object(p.a)(e=>({appFrame:{height:"100%"},parentContainer:{display:"flex",flexDirection:"row",height:"100%",overflow:"hidden"},mapContainer:{overflow:"hidden",flex:"1 1 75%"},drawerContainer:{flex:"0 0 25%",wordWrap:"break-word",maxWidth:"25%"}}));var ce=({loading:e,vectorTiles:t,clickMarker:n,handleMapClick:a,searchSubmit:r,signOut:i})=>{const c=ie();return e||!t?o.a.createElement("div",null,"loading..."):o.a.createElement(m.AppFrame,{className:c.appFrame,topbar:o.a.createElement(k,{title:"Network Attributes",searchSubmit:r,signOut:i}),fullWidth:!0,noScroll:!0},o.a.createElement("div",{className:c.parentContainer},n&&n.jsonData&&o.a.createElement("div",{id:"drawer-container",className:c.drawerContainer},o.a.createElement(re,{data:n.jsonData})),o.a.createElement("div",{className:c.mapContainer},o.a.createElement($,{vectorTiles:t,clickMarker:n,handleMapClick:a}))))};var le=({location:e,history:t})=>{const n=Object(a.useState)(!0),r=Object(s.a)(n,2),i=r[0],p=r[1],m=Object(a.useState)(),g=Object(s.a)(m,2),h=g[0],b=g[1],f=Object(a.useState)(),y=Object(s.a)(f,2),_=y[0],v=y[1],E=Object(a.useRef)();E.current=_;const O=Object(d.useHosted)(T,!0,!1),w=O.isAuthenticated,S=O.getCurrentToken,P=O.signIn,j=O.signOut;Object(a.useEffect)(()=>{if(!i)return;const e="".concat("https://d2hsyhl6qlaiyu.cloudfront.net","/").concat("NET_ATT/BLM/NHDFlowline","/metadata.json");R.a.info("URL",e),fetch(e).then(e=>e.json()).then(e=>(e.bounds=JSON.parse("[".concat(e.bounds,"]")),e.center=JSON.parse("[".concat(e.center,"]")),Object(l.a)(Object(l.a)({},e),{},{sourceName:"NHDFlowline",url:"".concat("https://d2hsyhl6qlaiyu.cloudfront.net","/").concat("NET_ATT/BLM/NHDFlowline","/{z}/{x}/{y}.pbf"),json:JSON.parse(e.json),zoom:14,minZoom:parseInt(e.minzoom,10),maxZoom:parseInt(e.maxzoom,10),longitude:e.center[0],latitude:e.center[1]}))).then(e=>{R.a.debug("RESP",e),b(Object(l.a)(Object(l.a)({},h),{},{NHDFlowline:e})),p(!1)}).catch(e=>{console.log("DATA::fetch_tile::err:",e)})},[i,h]);const I=e=>{try{R.a.debug("handleGotRecord:: Record",e);const t=JSON.parse(e.data),n=t.cp_line_pt,a=t.pt,o=Object(c.a)(t,["cp_line_pt","pt"]);R.a.debug("handleGotRecord:: Record data parsed",{cpLinePt:n,pt:a,jsonData:o});const r=n?JSON.parse(n):void 0;v(Object(l.a)(Object(l.a)({},E.current),{},{loading:!1,intLngLat:r?r.coordinates:void 0,catchGeo:e.catchGeom.bbox?JSON.parse(e.catchGeom.geom):void 0,catchBBox:e.catchGeom.bbox?JSON.parse(e.catchGeom.bbox):void 0,reachBBox:e.reachGeom.bbox?JSON.parse(e.reachGeom.bbox):void 0,jsonData:Object(l.a)({nhdplusid:e.id},o)}))}catch(t){R.a.error(t,e),v(Object(l.a)(Object(l.a)({},E.current),{},{loading:!1}))}};return w?o.a.createElement(ce,{loading:i,vectorTiles:h,clickMarker:_,handleMapClick:({lngLat:e})=>(v({lngLat:e,loading:!0,intLngLat:void 0,catchGeo:void 0,catchBBox:void 0,reachBBox:void 0,jsonData:{}}),S().then(t=>u.api.apiCall(C,t,u.graphql.queries.geoRecord,{lngLat:e}).then(e=>I(e.data.geoRecord)))),searchSubmit:e=>S().then(t=>u.api.apiCall(C,t,u.graphql.queries.record,{id:e}).then(e=>(e.data.record&&v({lngLat:void 0,loading:!1,intLngLat:void 0,catchGeo:void 0,catchBBox:void 0,reachBBox:void 0,jsonData:{}}),I(e.data.record)))),signOut:j}):o.a.createElement("div",null,o.a.createElement("button",{onClick:()=>P()},"Logged Out"))};const se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function de(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}var ue=n(496),pe=n(61);n(755),n(756);n(757),Object(m.devSetup)(),i.a.render(o.a.createElement(ue.a,{basename:"/"},o.a.createElement(pe.a,{path:"*",component:le})),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/net_att",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("/net_att","/service-worker.js");se?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(n=>{const a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):de(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):de(t,e)})}}()}},[[517,1,2]]]);
//# sourceMappingURL=main.3b787687.chunk.js.map