(this["webpackJsonp@netatt/app"]=this["webpackJsonp@netatt/app"]||[]).push([[0],{161:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.api=o(n(781)),t.graphql=o(n(799));var i=n(800);Object.defineProperty(t,"typeDefs",{enumerable:!0,get:function(){return i.default}})},549:function(e,t,n){e.exports=n(819)},569:function(e,t){},571:function(e,t){},781:function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.authCheck=t.apiCall=void 0;var o,i=a(n(782)),c=n(817),l=a(n(320)),s=a(n(34));t.apiCall=function(e,t,n,r){return i.default({url:e,method:"post",headers:t?{authorization:"Bearer "+t}:null,data:{query:c.print(n),variables:r}}).then((function(e){return e.data})).catch((function(a){throw a.response&&404===a.response.status?new Error("API Url not found: "+e):a.code&&"ECONNREFUSED"===a.code?new Error("Connection refused. Could not contact: '"+e+"'"):(s.default.error({url:e,jwt:t,query:c.print(n),variables:r}),a)}))},t.authCheck=function(e,n){return t.apiCall(e,n,l.default(o||(o=r(["\n            query AuthCall {\n                auth {\n                    loggedIn\n                    userPool\n                    clientId\n                    region\n                }\n            }\n        "],["\n            query AuthCall {\n                auth {\n                    loggedIn\n                    userPool\n                    clientId\n                    region\n                }\n            }\n        "]))),{})}},799:function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.queries=t.fragments=void 0;var o,i,c,l,s,d,u=a(n(320));t.fragments={record:u.default(o||(o=r(["\n        fragment recordFragment on Record {\n            id\n            ds\n            catchGeom {\n                geom\n                bbox\n            }\n            reachGeom {\n                bbox\n            }\n            metrics\n            nhdProps\n            __typename\n        }\n    "],["\n        fragment recordFragment on Record {\n            id\n            ds\n            catchGeom {\n                geom\n                bbox\n            }\n            reachGeom {\n                bbox\n            }\n            metrics\n            nhdProps\n            __typename\n        }\n    "])))},t.queries={fieldDefs:u.default(i||(i=r(["\n        query fieldDefs {\n            fieldDefs\n        }\n    "],["\n        query fieldDefs {\n            fieldDefs\n        }\n    "]))),geoRecord:u.default(c||(c=r(["\n        query geoRecord($lngLat: [Float]!) {\n            geoRecord(lngLat: $lngLat) {\n                ...recordFragment\n            }\n        }\n        ","\n    "],["\n        query geoRecord($lngLat: [Float]!) {\n            geoRecord(lngLat: $lngLat) {\n                ...recordFragment\n            }\n        }\n        ","\n    "])),t.fragments.record),record:u.default(l||(l=r(["\n        query record($id: ID!) {\n            record(id: $id) {\n                ...recordFragment\n            }\n        }\n        ","\n    "],["\n        query record($id: ID!) {\n            record(id: $id) {\n                ...recordFragment\n            }\n        }\n        ","\n    "])),t.fragments.record),geoRecordEPSG:u.default(s||(s=r(["\n        query geoRecordEPSG($lngLat: [Float]!, $epsg: Int!) {\n            geoRecordEPSG(lngLat: $lngLat, epsg: $epsg) {\n                ...recordFragment\n            }\n        }\n        ","\n    "],["\n        query geoRecordEPSG($lngLat: [Float]!, $epsg: Int!) {\n            geoRecordEPSG(lngLat: $lngLat, epsg: $epsg) {\n                ...recordFragment\n            }\n        }\n        ","\n    "])),t.fragments.record),upstreamCatchment:u.default(d||(d=r(["\n        query upstreamCatchment($id: ID!) {\n            upstreamCatchment(id: $id)\n        }\n    "],["\n        query upstreamCatchment($id: ID!) {\n            upstreamCatchment(id: $id)\n        }\n    "])))}},800:function(e,t,n){"use strict";var r=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o,i=a(n(320)).default(o||(o=r(["\n    # Check out the cheat sheet:\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\n\n    schema {\n        query: Query\n        # mutation: Mutation\n    }\n\n    type Query {\n        auth: AuthParams\n\n        fieldDefs: String\n        geoRecord(lngLat: [Float]!): Record\n        geoRecordEPSG(lngLat: [Float]!, epsg: Int!): Record\n        upstreamCatchment(id: ID!): RecordGeometry\n\n        record(id: ID!, ds: [String]): Record\n        records(ids: [ID]!, ds: [String]): [RecordSet]\n    }\n\n    # this schema allows the following mutation:\n    # type Mutation {\n    # signal a deletion of a record\n    # insertRecords(id: [ID]!, ds: String!): [Record]!\n    # deleteRecords(id: [ID]!, ds: String!): [ID]!\n    # wipeDS(ds: String!): String\n    # }\n\n    type RecordGeometry {\n        geom: String\n        bbox: String\n    }\n\n    type AuthParams {\n        loggedIn: Boolean\n        userPool: String\n        clientId: String\n        region: String\n    }\n\n    type RecordSet {\n        id: ID!\n        records: [Record]\n    }\n\n    type Record {\n        id: ID!\n        ds: String\n        catchGeom: RecordGeometry\n        reachGeom: RecordGeometry\n        metrics: String\n        nhdProps: String\n    }\n"],["\n    # Check out the cheat sheet:\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\n\n    schema {\n        query: Query\n        # mutation: Mutation\n    }\n\n    type Query {\n        auth: AuthParams\n\n        fieldDefs: String\n        geoRecord(lngLat: [Float]!): Record\n        geoRecordEPSG(lngLat: [Float]!, epsg: Int!): Record\n        upstreamCatchment(id: ID!): RecordGeometry\n\n        record(id: ID!, ds: [String]): Record\n        records(ids: [ID]!, ds: [String]): [RecordSet]\n    }\n\n    # this schema allows the following mutation:\n    # type Mutation {\n    # signal a deletion of a record\n    # insertRecords(id: [ID]!, ds: String!): [Record]!\n    # deleteRecords(id: [ID]!, ds: String!): [ID]!\n    # wipeDS(ds: String!): String\n    # }\n\n    type RecordGeometry {\n        geom: String\n        bbox: String\n    }\n\n    type AuthParams {\n        loggedIn: Boolean\n        userPool: String\n        clientId: String\n        region: String\n    }\n\n    type RecordSet {\n        id: ID!\n        records: [Record]\n    }\n\n    type Record {\n        id: ID!\n        ds: String\n        catchGeom: RecordGeometry\n        reachGeom: RecordGeometry\n        metrics: String\n        nhdProps: String\n    }\n"])));t.default=i},813:function(e,t,n){},819:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(40),i=n.n(o),c=n(528),l=n(32),s=n(70),d=n(34),u=n.n(d),m="pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",p="https://9w7j442qoj.execute-api.us-west-2.amazonaws.com/prod/api",f=(Object({NODE_ENV:"production",PUBLIC_URL:"/net_att",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_RS_TILES_CDN:"https://d2hsyhl6qlaiyu.cloudfront.net",REACT_APP_RS_CDN:"https://d18emzkyqtselk.cloudfront.net",REACT_APP_GRAPHQL:"https://9w7j442qoj.execute-api.us-west-2.amazonaws.com/prod/api",REACT_APP_AWS_REGION:"us-west-2",REACT_APP_COGNITO_USER_POOL_ID:"us-west-2_jkK8HRXBU",REACT_APP_COGNITO_CLIENT_ID:"3it1laq9voegdn3urkp74f9sh1",REACT_APP_HOSTED_DOMAIN:"riverscapes-prod.auth.us-west-2.amazoncognito.com",REACT_APP_VERSION:"0.1.32",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com"}).REACT_APP_CDN,{REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_VERSION:"0.1.32",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com",REACT_APP_GRAPHQL:"https://9w7j442qoj.execute-api.us-west-2.amazonaws.com/prod/api"});Object.keys(f).forEach((function(e){f[e]||u.a.error("You must set environment variable: ".concat(e))}));Object({NODE_ENV:"production",PUBLIC_URL:"/net_att",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_RS_TILES_CDN:"https://d2hsyhl6qlaiyu.cloudfront.net",REACT_APP_RS_CDN:"https://d18emzkyqtselk.cloudfront.net",REACT_APP_GRAPHQL:"https://9w7j442qoj.execute-api.us-west-2.amazonaws.com/prod/api",REACT_APP_AWS_REGION:"us-west-2",REACT_APP_COGNITO_USER_POOL_ID:"us-west-2_jkK8HRXBU",REACT_APP_COGNITO_CLIENT_ID:"3it1laq9voegdn3urkp74f9sh1",REACT_APP_HOSTED_DOMAIN:"riverscapes-prod.auth.us-west-2.amazoncognito.com",REACT_APP_VERSION:"0.1.32",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com"}).REACT_APP_GA_TOKEN;var h=new URL("/net_att/",window.location.origin),g={Auth:{region:"us-west-2",userPoolId:"us-west-2_jkK8HRXBU",userPoolWebClientId:"3it1laq9voegdn3urkp74f9sh1",mandatorySignIn:!0,oauth:{domain:"riverscapes-prod.auth.us-west-2.amazoncognito.com",scope:["email","profile","openid"],redirectSignIn:h.toString(),redirectSignOut:h.toString(),responseType:"code"}}},b={version:"0.1.32",viewport:{latitude:44.2983897312401,longitude:-114.374749399575},metricPrefs:{pinned:[],accordion:{}},selectedReachId:void 0},v=n(142),y=function(){var e=Object(v.useLocalStorage)("INIT_STATE",b),t=Object(s.a)(e,2),n=t[0],a=t[1];Object(r.useEffect)((function(){"0.1.32"!==n.version&&(u.a.warn("Version upgrade detected, wiping slate!"),a(b))}),[n.version,a]);var o=Object(r.useCallback)((function(e){a(Object(l.a)(Object(l.a)({},n),e))}),[n,a]);return[n,o]},O=n(507),_=n(161),E=n(413),w=n(420),S=n(414),j=n(185),C=n(415),P=n(532),R=n(126),k=n(4),x=n(517),T=n.n(x),N=n(20),D=Object(E.a)((function(e){return{root:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(0,1),textShadow:"3px 3px 3px rgba(0,0,0,0.7)",backgroundImage:"url(https://northarrowresearchlabs.github.io/riverscapes/HeaderBackground.png)",backgroundRepeat:"no-repeat",backgroundPosition:"0% 50%",backgroundSize:"cover",backgroundColor:"#444444"},version:{paddingLeft:e.spacing(1)},logo:{height:40,width:40,marginRight:e.spacing(2)},programChooser:{margin:e.spacing(0,1),color:e.palette.primary.contrastText,"& svg":{color:e.palette.primary.contrastText},"&:before":{borderColor:e.palette.primary.contrastText},"&:after":{borderColor:e.palette.primary.contrastText}},transparent:{backgroundColor:"transparent",background:"none",color:e.palette.text.primary},search:{position:"relative",border:"1px solid white",borderRadius:e.shape.borderRadius,backgroundColor:Object(N.d)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(N.d)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,flexGrow:1,maxWidth:"20rem",[e.breakpoints.up("sm")]:{marginLeft:e.spacing(3),width:"auto"}},searchError:{border:"1px solid red"},searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},spacer:{flexGrow:1},inputInput:{padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:200}},sectionDesktop:{display:"none",[e.breakpoints.up("sm")]:{display:"flex",flexGrow:1}},sectionMobile:{display:"flex",flexGrow:1,[e.breakpoints.up("sm")]:{display:"none"}}}})),I={text:""},A=function(e){var t=e.title,n=e.searchSubmit,o=e.signOut,i=D(),c=Object(r.useState)(I),d=Object(s.a)(c,2),m=d[0],p=d[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(S.a,{position:"static"},a.a.createElement(w.a,{className:i.root,disableGutters:!0},a.a.createElement("a",{href:"http://riverscapes.xyz/"},a.a.createElement("img",{className:i.logo,src:"https://riverscapes.xyz/assets/images/RiverscapesLogo.png",alt:"logo"})),a.a.createElement(j.a,{variant:"subtitle1"},t),a.a.createElement(j.a,{variant:"overline",className:i.version},"v.","0.1.32"),a.a.createElement("div",{className:i.spacer}),m.error&&a.a.createElement(j.a,{variant:"subtitle1",color:"error"},m.error),a.a.createElement("div",{className:Object(k.default)(i.search,{[i.searchError]:Boolean(m.error)})},a.a.createElement("div",{className:i.searchIcon},a.a.createElement(T.a,null)),a.a.createElement(P.a,{placeholder:"NHDPlusID\u2026 (55000600125036)",onKeyDown:function(e){var t;"Enter"===e.key&&(u.a.debug("searchSubmitHandle ENTER DETECTED",e),(t=m.text)&&t.length>0&&R.util.isNumeric(t)?(p(Object(l.a)(Object(l.a)({},m),{},{error:void 0})),u.a.debug("searchSubmitHandle called",t),n(parseInt(t,10)).then((function(){p(I)}))):(u.a.debug("searchSubmitHandle ERROR non numeric"),p(Object(l.a)(Object(l.a)({},m),{},{error:"Non-Numberic nhdid"}))))},value:m.text,onChange:function(e){return p(Object(l.a)(Object(l.a)({},m),{},{text:e.target.value}))},classes:{root:i.inputRoot,input:i.inputInput},inputProps:{"aria-label":"search"}})),a.a.createElement(C.a,{color:"inherit",onClick:function(){return o()}},"Sign Out"))))},L=n(133),F=n(111),M=n(205),G=n(191),H=n(520),q=n.n(H),B=n(519),z=n.n(B),W=n(521),V=n.n(W),J=Object(E.a)((function(e){return{root:{},icon:{zIndex:100,width:20,height:20,position:"absolute",top:"50%",left:"50%",textAlign:"center",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"}}})),$=function(e){var t=e.latLng,n=e.Icon,r=e.align,o=J(),i={};if(r){switch(r[0]){case"bottom":i.transform="translateY(-100%)";break;case"top":i.transform="translateY(0%)";break;case"center":i.transform="translateY(-50%)";break;default:throw new Error("Must specify vertical placement of align")}switch(r[1]){case"left":i.transform+=" translateX(0%)";break;case"right":i.transform+=" translateX(-100%)";break;case"center":i.transform+=" translateX(-50%)";break;default:throw new Error("Must specify horizontal placement of align")}}return a.a.createElement(F.Marker,{className:o.root,longitude:t[0],latitude:t[1]},a.a.createElement("div",{className:o.root},a.a.createElement(n,{className:o.icon,style:i})))},Y=function(e){var t=e.vectorTiles,n=e.selectedReach,o=e.initialViewport,i=e.handleMapClick,c=Object(r.useState)(0),d=Object(s.a)(c,2),p=d[0],f=d[1],h=Object(r.useState)(),g=Object(s.a)(h,2),b=g[0],v=g[1],y=Object(r.useRef)(),O=Object(r.useRef)(),_=Object(r.useState)(),E=Object(s.a)(_,2),w=E[0],S=E[1],j=Object(r.useMemo)((function(){return t?Object(G.combineStyles)(G.MapStyles[p].style,function(e){u.a.info("VECTORTILES",e);var t=Object.keys(e).reduce((function(t,n){var r=e[n];return Object(l.a)(Object(l.a)({},t),{},{[r.sourceName]:{tiles:[r.url],type:"vector",minzoom:r.minZoom,maxzoom:r.maxZoom,bounds:r.bounds}})}),{}),n=[{id:"NHDFlowlines_lines",type:"line",source:e.NHDFlowline.sourceName,"source-layer":"NHDFlowlines",minzoom:e.NHDFlowline.minZoom,maxzoom:16.5,layout:{visibility:"visible"},paint:{"line-opacity":["interpolate",["linear"],["zoom"],e.NHDFlowline.minZoom,0,8,1],"line-width":["interpolate",["linear"],["zoom"],e.NHDFlowline.minZoom,.5,16,3],"line-color":["match",["get","NHDPlusID"],[-1],"#FFFF00",["step",["get","FType"],"#FF0000",460,"#0000FF"]]}}];return{version:8,name:"Outdoors",metadata:{"mapbox:type":"default","mapbox:origin":"outdoors-v11","mapbox:autocomposite":!0,"mapbox:groups":{},"mapbox:sdk-support":{js:"0.50.0",android:"6.7.0",ios:"4.6.0"}},sources:Object(l.a)({},t),sprite:"mapbox://sprites/pipbailey/cjvfq2uwm0vqk1foby0dtwdmk/ayuihl2d38ufkjhmu0pwx0cto",glyphs:"mapbox://fonts/pipbailey/{fontstack}/{range}.pbf",layers:[].concat(n),created:"2019-05-08T21:16:06.811Z",id:"cjvfq2uwm0vqk1foby0dtwdmk",modified:"2019-05-08T22:02:34.939Z",owner:"pipbailey",visibility:"private",draft:!1}}(t)):null}),[p,t]);Object(r.useLayoutEffect)((function(){if(n){if((null===n||void 0===n?void 0:n.reachBBox)&&y.current){var e,t=y.current,r=t.getLayer("NHDFlowlines_lines"),a=r.getPaintProperty("line-color");a[2]=[parseInt(null===n||void 0===n||null===(e=n.nhdProps)||void 0===e?void 0:e.nhdplusid,10)],u.a.debug("line-color",a,r),t.setPaintProperty("NHDFlowlines_lines","line-color",a)}if((null===n||void 0===n?void 0:n.catchBBox)||(null===n||void 0===n?void 0:n.reachBBox)){var o=(null===n||void 0===n?void 0:n.catchBBox)||(null===n||void 0===n?void 0:n.reachBBox);if(!o.coordinates)return void u.a.error("coordinates missing");var i=[Math.min.apply(Math,Object(L.a)(o.coordinates[0].map((function(e){return e[0]})))),Math.min.apply(Math,Object(L.a)(o.coordinates[0].map((function(e){return e[1]})))),Math.max.apply(Math,Object(L.a)(o.coordinates[0].map((function(e){return e[0]})))),Math.max.apply(Math,Object(L.a)(o.coordinates[0].map((function(e){return e[1]}))))];if(4===i.length&&i.every(R.util.isNumeric)){var c=[(i[0]+i[2])/2,(i[1]+i[3])/2];O.current&&i.every((function(e,t){return!O.current||e===O.current[t]}))||(O.current=i,S({transitionDuration:2e3,transitionInterpolator:new F.FlyToInterpolator,transitionEasing:M.b}),setTimeout((function(){return S(void 0)}),2e3),v(i),u.a.debug("Mapbounds Set",{bounds:i,lngLat:c}))}}}}),[n]);var C=n&&n.clickCoords&&n.intersect?{type:"Feature",properties:{percentile:0},geometry:{type:"LineString",coordinates:[n.clickCoords,n.intersect]}}:null,P=n&&n.catchGeo?{type:"Feature",properties:{},geometry:n.catchGeo}:null,k=Object(r.useMemo)((function(){return a.a.createElement(G.StyleButtons,{controlPadding:{},currStyle:p,mapStyles:G.MapStyles,setCurrStyle:function(e){return f(e)}})}),[p]);return a.a.createElement(G.BaseMap,{mapBoxToken:m,reactMapGLProps:{clickRadius:2,maxZoom:16,minZoom:6,onClick:function(e,t){S(null),i(e,t)}},bounds:b,showMe:!0,viewport:o,mapStyles:[{style:j}],transition:w,onTransitionStart:function(){u.a.debug("onTransition START")},onTransitionEnd:function(){u.a.debug("onTransition END"),S(null)}},k,n&&n.intersect&&a.a.createElement($,{latLng:n.intersect,Icon:z.a}),n&&n.clickCoords&&a.a.createElement($,{key:"ch_clickMarker",latLng:n.clickCoords,Icon:n.loading?q.a:V.a,align:["bottom","center"]}),C&&a.a.createElement(F.Source,{type:"geojson",data:C,key:"ch_connect_line"},a.a.createElement(F.Layer,{id:"connect_line",type:"line",paint:{"line-color":"#FF0090","line-opacity":1,"line-width":["interpolate",["linear"],["zoom"],8,.5,16,3]}})),P&&a.a.createElement(F.Source,{type:"geojson",data:P,key:"ch_upstream_line"},a.a.createElement(F.Layer,{id:"upstream_line",type:"line",paint:{"line-color":"#9933ff","line-opacity":1,"line-width":1}}),a.a.createElement(F.Layer,{id:"upstream_fill",type:"fill",paint:{"fill-opacity":["interpolate",["linear"],["zoom"],6,.5,16,.2],"fill-color":"#9933ff"}})))},U=n(828),K=n(869),X=n(871),Q=n(870),Z=n(524),ee=n.n(Z),te=n(878),ne=n(329),re=n.n(ne),ae=n(522),oe=n.n(ae),ie=n(523),ce=n.n(ie);var le,se=["nhdplusid","vpuid","reachcode","permanent_identifier","fromnode","tonode","hydroseq","levelpathi","terminalpa","dnlevelpat","dnhydroseq"],de=Object(E.a)((function(e){return{root:{display:"flex",width:"100%",overflow:"hidden",borderBottom:"1px solid #DEDEDE"},rootHover:{background:"#eee"},inner:{display:"flex",width:"100%",overflow:"hidden"},noval:{color:"#999999"},pinned:{background:e.palette.secondary.main,borderBottom:"1px solid ".concat(e.palette.secondary.main),color:e.palette.secondary.contrastText},name:{padding:"3px",flex:"1 1 70%",textAlign:"left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},value:{lineHeight:"1.5rem",padding:"3px",flex:"1 1 20%",textAlign:"right"},idVal:{color:e.palette.text.secondary,padding:e.spacing(.5,1),border:"1px solid #dddddd",background:"#eeeeee"},stringVal:{textAlign:"left"},unit:{lineHeight:"1.5rem",padding:"3px",paddingLeft:e.spacing(1)/2,flex:"0 1 5%",textAlign:"left"},pinButton:{opacity:0},buttonHover:{flex:"0 0",opacity:1}}})),ue=function(e){var t=e.def,n=e.val,o=e.isPinned,i=e.onPinToggle,c=de(),l=Object(r.useState)(!1),d=Object(s.a)(l,2),u=d[0],m=d[1],p=t.metric_type?t.metric_type:se.indexOf(t.metric_key)>-1?"id":"unknown",f=void 0===n?" ":function(e,t,n,r){if(null===r)return a.a.createElement("em",null,"NULL");if(!e)return R.util.isNumeric(r)?"spheroid_dist"===t?R.util.formatNum(r,6):R.util.formatNum(r,3):r.toString();switch(e){case"string":case"id":return r;case"float":return R.util.isNumeric(r)?n&&n.length>0?re()(r).format(n):R.util.formatNum(r,3):r;default:return r}}(p,t.metric_key,t.format_string,n);return a.a.createElement("div",{className:Object(k.default)(c.root,{[c.pinned]:o,[c.rootHover]:!o&&u}),onMouseOver:function(){return m(!0)},onMouseOut:function(){return m(!1)},onDoubleClick:function(){return i(t.metric_key)}},a.a.createElement(te.a,{title:a.a.createElement("div",null,a.a.createElement(j.a,{variant:"body1"},t.metric_name,t.units?" (".concat(t.units,")"):""),t.description&&a.a.createElement(j.a,{variant:"body2"},t.description))},a.a.createElement("div",{className:Object(k.default)(c.inner,{[c.noval]:!o&&(void 0===n||null===n)})},a.a.createElement(j.a,{variant:"body1",className:c.name},t.metric_name),a.a.createElement("div",{className:c.value},a.a.createElement(j.a,{variant:"id"===p||void 0===n?"overline":"body2",className:Object(k.default)({[c.idVal]:void 0!==n&&"id"===p,[c.stringVal]:void 0!==n&&"string"===p})},f)),a.a.createElement(j.a,{variant:"caption",className:c.unit},void 0===n?"":t.units))),a.a.createElement(te.a,{title:o?"Unpin this metric":"Pin this metric"},a.a.createElement(U.a,{size:"small",className:Object(k.default)(c.pinButton,{[c.buttonHover]:u}),onClick:function(){return i(t.metric_key)},color:"inherit"},o?a.a.createElement(oe.a,null):a.a.createElement(ce.a,null))))},me=Object(E.a)((function(e){return{root:{overflow:"scroll"},accordion:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},accordionExpanded:{},summary:{display:"flex"},summaryExpanded:{},summaryContent:{"&$expanded":{margin:"12px 0"}},details:{display:"flex",flexDirection:"column",padding:e.spacing(1,1,1,2)},fieldTitle:{flexGrow:1},fieldCount:{}}})),pe=function(e){var t=e.groups,n=e.pinned,r=e.onPinToggle,o=e.metricPrefs,i=e.onAccordionToggle,c=me();return a.a.createElement("div",{className:c.root},n.map((function(e,t){var n=e.def,o=e.val;return a.a.createElement(ue,{key:"mrow-pinned-".concat(t),def:n,val:o,isPinned:!0,onPinToggle:r})})),t.map((function(e,t){var n=e.name,l=e.fields;return a.a.createElement(K.a,{key:"accordion-".concat(t),square:!0,classes:{root:c.accordion,expanded:c.accordionExpanded},expanded:Boolean(o.accordion&&o.accordion[n]),onChange:function(){return i(n)}},a.a.createElement(X.a,{expandIcon:a.a.createElement(ee.a,null),classes:{root:c.summary,expanded:c.summaryExpanded,content:c.summaryContent}},a.a.createElement(j.a,{className:c.fieldTitle},n),a.a.createElement(j.a,{className:c.fieldCount,variant:"caption"},l.reduce((function(e,t){return t.val?e+1:e}),0),"/",l.length)),a.a.createElement(Q.a,{className:c.details},l.filter((function(e){return!o.pinned||-1===o.pinned.indexOf(e.metric_key)})).map((function(e,n){var o=e.def,i=e.val;return a.a.createElement(ue,{key:"mrow-".concat(t,"-").concat(n),def:o,val:i,onPinToggle:r})}))))})))},fe=n(872),he=n(874),ge=n(875),be=n(421),ve=n(880),ye=n(876),Oe=n(323),_e=n(502),Ee=n(419),we=n(345),Se=n.n(we),je=Object(E.a)((function(e){return{root:{display:"flex",width:"100%",overflow:"hidden"},tabs:{},dlgContent:{height:"100%",display:"flex",flexDirection:"column"},codeContainer:{padding:e.spacing(1,.5),minWidth:"60hw",overflow:"hidden"},code:{color:"#cccccc",background:"#444444"},inputText:{padding:e.spacing(1,.5),fontFamily:"Courier New,Courier,Lucida Sans Typewriter,Lucida Typewriter,monospace",color:"#cccccc"}}}));!function(e){e[e.JSON=0]="JSON",e[e.CSV=1]="CSV"}(le||(le={}));var Ce=function(e){var t=e.data,n=e.open,o=e.handleClose,i=je(),c=Object(r.useRef)(),d=Object(r.useState)(le.JSON),u=Object(s.a)(d,2),m=u[0],p=u[1],f=Object(r.useState)(!1),h=Object(s.a)(f,2),g=h[0],b=h[1],v=Object(r.useMemo)((function(){var e="",n=t.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},{[t.name]:t.fields.reduce((function(e,t){var n=t.def,r=t.val;return Object(l.a)(Object(l.a)({},e),{},{[n.metric_name]:r})}),{})})}),{});switch(m){case le.JSON:e=JSON.stringify(n,null,4);break;default:e=Object.keys(n).reduce((function(e,t){return[].concat(Object(L.a)(e),Object(L.a)(Object.keys(n[t]).map((function(e){return"".concat(t,",").concat(e,",").concat(n[t][e]?n[t][e]:"")}))))}),["Group,Name,Value"]).join("\r\n")}return e}),[t,m]),y=Object(r.useCallback)((function(){n&&c.current&&c.current.select()}),[n]);return Object(r.useEffect)((function(){n&&(Se()(v),b(!0))}),[n,v]),a.a.createElement(a.a.Fragment,null,a.a.createElement(fe.a,{open:n,onClose:o,"aria-labelledby":"form-dialog-title",maxWidth:"md",fullWidth:!0},a.a.createElement(ge.a,{className:i.dlgContent},a.a.createElement(ve.a,{className:i.tabs,value:m,onChange:function(e,t){return p(t)},"aria-label":"Data selector tabs"},a.a.createElement(ye.a,{label:"JSON",value:le.JSON}),a.a.createElement(ye.a,{label:"CSV",value:le.CSV})),a.a.createElement(Oe.a,{className:i.codeContainer},a.a.createElement(be.a,{multiline:!0,fullWidth:!0,inputRef:c,inputProps:{className:i.inputText,readOnly:!0,wrap:"soft"},className:i.code,rows:10,onFocus:y,onSelect:y,onChange:y,onClick:function(){Se()(v),b(!0)},"aria-label":"maximum height",placeholder:"Maximum 4 rows",value:v}))),a.a.createElement(he.a,null,a.a.createElement(C.a,{onClick:o,color:"primary"},"Cancel"))),a.a.createElement(Ee.a,{anchorOrigin:{vertical:"top",horizontal:"center"},color:"secondary",open:g,autoHideDuration:3e3,onClose:function(){return b(!1)}},a.a.createElement(_e.a,{elevation:6,variant:"filled",severity:"info"},m===le.JSON&&"JSON ",m===le.CSV&&"CSV ","Copied to clipboard")))},Pe=n(525),Re=n.n(Pe),ke=Object(E.a)((function(e){return{root:{height:"100%",overflow:"hidden","& *":{userSelect:"text"},display:"flex",flexDirection:"column"},title:{flexGrow:1}}})),xe=function(e){var t=e.metrics,n=e.loading,o=e.nhdProps,i=e.fieldDefs,c=e.metricPrefs,d=e.setOfflineState,m=ke(),p=Object(r.useState)(!1),f=Object(s.a)(p,2),h=f[0],g=f[1],b=Object(r.useCallback)((function(e){var t=Object(l.a)({},c.accordion);d({metricPrefs:Object(l.a)(Object(l.a)({},c),{},{accordion:Object(l.a)(Object(l.a)({},t),{},{[e]:!Boolean(t[e])})})})}),[c,d]);if(n)return a.a.createElement(j.a,null,"Loading...");u.a.debug("MarkerFields::",{metrics:t,loading:n,nhdProps:o,fieldDefs:i,metricPrefs:c});var v=Object(l.a)(Object(l.a)({},t.catch_metrics),t.wing_metrics),y=Array.from(new Set(i.map((function(e){return e.group_name})))),O=Array.from(new Set(i.map((function(e){return e.metric_key})))),_=y.map((function(e){return{name:e,fields:i.map((function(e){return{def:e,val:null===v?null:v[e.metric_key]}}))}}));Object.keys(_).forEach((function(e){_[e].fields.sort((function(e,t){return e.def.metric_name.toLowerCase().localeCompare(t.def.metric_name.toLowerCase())}))}));_.push({name:"Other",fields:v?Object.keys(v).filter((function(e){return-1===O.indexOf(e)})).map((function(e){return Ne(e,o[e])})):[]}),_.push({name:"NHD Fields",fields:Object.keys(o).map((function(e){return Ne(e,o[e])}))});var E=c.pinned?c.pinned.map((function(e){return{def:i.find((function(t){return t.metric_key===e}))||Ne(e,v[e]).def,val:v[e]||o[e]}})):[],C=_.map((function(e){return{name:e.name,fields:e.fields.filter((function(e){return-1===c.pinned.indexOf(e.def.metric_key)}))}}));return a.a.createElement("div",{className:m.root},a.a.createElement(S.a,{position:"static"},a.a.createElement(w.a,null,a.a.createElement(j.a,{variant:"subtitle1",className:m.title},"NHDPlusID: ",o.nhdplusid),a.a.createElement(U.a,{className:m.dwnldBtn,color:"inherit",onClick:function(){return g(!0)}},a.a.createElement(Re.a,null)))),a.a.createElement(pe,{groups:C,pinned:E,metricPrefs:c,onPinToggle:function(e){var t=c.pinned&&c.pinned.indexOf(e)>-1,n=c.pinned||[];d({metricPrefs:Object(l.a)(Object(l.a)({},c),{},{pinned:t?n.filter((function(t){return t!==e})):[].concat(Object(L.a)(n),[e])})})},onAccordionToggle:b}),a.a.createElement(Ce,{data:_,open:h,handleClose:function(){return g(!1)}}))},Te={spheroid_dist:{group_name:"NHD Fields",metric_key:"spheroid_dist",metric_type:"float",metric_name:"Distance to Reach",description:"Distance from the point you clicked to the nearest point on the reach.",units:"m",format_string:"0,0.0"},fcode:{group_name:"NHD Fields",metric_key:"fcode",metric_type:"id",metric_name:"FCode",description:null,units:null,format_string:null}};function Ne(e,t){return Te[e]?{def:Te[e],val:t}:{def:{group_name:"NHD Fields",metric_key:e,metric_name:e,description:null,units:null,format_string:null},val:t}}var De=n(159),Ie=Object(E.a)((function(e){return{appFrame:{height:"100%"},parentContainer:{display:"flex",flexDirection:"row",height:"100%",overflow:"hidden"},mapContainer:{overflow:"hidden",flex:"1 1 75%"},drawerContainer:{flex:"0 0 25%",wordWrap:"break-word",maxWidth:"25%"}}})),Ae=function(e){var t,n,r=e.error,o=e.offlineState,i=e.setOfflineState,c=e.ephemeralState,l=e.handleMapClick,s=e.searchSubmit,d=e.signOut,u=Ie();return a.a.createElement(v.AppFrame,{className:u.appFrame,topbar:a.a.createElement(A,{title:"Network Attributes",searchSubmit:s,signOut:d}),fullWidth:!0,noScroll:!0},a.a.createElement("div",{className:u.parentContainer},r&&a.a.createElement(De.a,null,a.a.createElement(j.a,{color:"error",variant:"body2"},r)),!r&&c&&c.selectedReach&&a.a.createElement("div",{id:"drawer-container",className:u.drawerContainer},a.a.createElement(xe,{loading:c.selectedReach.loading,metrics:null===(t=c.selectedReach)||void 0===t?void 0:t.metrics,nhdProps:null===(n=c.selectedReach)||void 0===n?void 0:n.nhdProps,fieldDefs:c.fieldDefs.defs||[],metricPrefs:o.metricPrefs,setOfflineState:i})),!r&&a.a.createElement("div",{className:u.mapContainer},a.a.createElement(Y,{initialViewport:o.viewport,vectorTiles:c.vectorTileDefs.tiles,selectedReach:c.selectedReach,handleMapClick:l}))))},Le={fieldDefs:{loading:!0},vectorTileDefs:{loading:!0}},Fe=function(){var e=Object(r.useState)(!0),t=Object(s.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(),d=Object(s.a)(i,2),m=d[0],f=d[1],h=y(),b=Object(s.a)(h,2),v=b[0],E=b[1],w=Object(r.useState)(Le),S=Object(s.a)(w,2),j=S[0],C=S[1],P=Object(O.useHosted)(g,!0,!1),R=P.isAuthenticated,k=P.getCurrentToken,x=P.signIn,T=P.signOut,N=Object(r.useRef)();N.current={offline:v,ephemeral:j},Object(r.useEffect)((function(){var e=!j||j.fieldDefs.loading||j.vectorTileDefs.loading;e!==n&&o(e)}),[j,n]);var D=Object(r.useCallback)((function(e){var t;C(Object(l.a)(Object(l.a)({},null===(t=N.current)||void 0===t?void 0:t.ephemeral),e))}),[C]);Object(r.useEffect)((function(){var e;if(null===(e=N.current)||void 0===e?void 0:e.ephemeral.vectorTileDefs.loading){var t="".concat("https://d2hsyhl6qlaiyu.cloudfront.net","/").concat("NET_ATT/BLM/NHDFlowline","/metadata.json");u.a.info("URL",t),fetch(t).then((function(e){return e.json()})).then((function(e){return e.bounds=JSON.parse("[".concat(e.bounds,"]")),e.center=JSON.parse("[".concat(e.center,"]")),Object(l.a)(Object(l.a)({},e),{},{sourceName:"NHDFlowline",url:"".concat("https://d2hsyhl6qlaiyu.cloudfront.net","/").concat("NET_ATT/BLM/NHDFlowline","/{z}/{x}/{y}.pbf"),json:JSON.parse(e.json),zoom:14,minZoom:parseInt(e.minzoom,10),maxZoom:parseInt(e.maxzoom,10),longitude:e.center[0],latitude:e.center[1]})})).then((function(e){u.a.debug("RESP",e),D({vectorTileDefs:{tiles:{NHDFlowline:e},loading:!1}})})).catch((function(e){u.a.error("DATA::fetch_tile::err:",e),f("Error fetching vector tile definitions"),D({vectorTileDefs:{tiles:void 0,loading:!1}})}))}}),[D]),Object(r.useEffect)((function(){R&&k().then((function(e){return _.api.apiCall(p,e,_.graphql.queries.fieldDefs,{}).then((function(e){e.data.fieldDefs&&D({fieldDefs:{defs:JSON.parse(e.data.fieldDefs),loading:!1}})})).catch((function(e){u.a.error("DATA::fetch_tile::err:",e),f("Error fetching field definitions"),D({fieldDefs:{defs:void 0,loading:!1}})}))}))}),[k,D,R]);var I=Object(r.useCallback)((function(e){try{var t;u.a.debug("handleGotRecord:: Record",e);var n=JSON.parse(e.nhdProps),r=n.cp_line_pt,a=n.pt,o=Object(c.a)(n,["cp_line_pt","pt"]),i=e.metrics?JSON.parse(e.metrics):{};u.a.debug("handleGotRecord:: Record data parsed",{cpLinePt:r,pt:a,nhdProps:o});var s=r?JSON.parse(r):void 0;D({selectedReach:Object(l.a)(Object(l.a)({},null===(t=N.current)||void 0===t?void 0:t.ephemeral.selectedReach),{},{loading:!1,intersect:s?s.coordinates:void 0,catchGeo:e.catchGeom.bbox?JSON.parse(e.catchGeom.geom):void 0,catchBBox:e.catchGeom.bbox?JSON.parse(e.catchGeom.bbox):void 0,reachBBox:e.reachGeom.bbox?JSON.parse(e.reachGeom.bbox):void 0,metrics:i,nhdProps:o})})}catch(m){var d;u.a.error("DATA::handleGotRecord::err:",{err:m,record:e}),f("Error parsing record from database"),D({selectedReach:Object(l.a)(Object(l.a)({},null===(d=N.current)||void 0===d?void 0:d.ephemeral.selectedReach),{},{loading:!1})})}}),[D]),A=Object(r.useCallback)((function(e){var t,n=e.lngLat;return R?(D({selectedReach:Object(l.a)(Object(l.a)({},null===(t=N.current)||void 0===t?void 0:t.ephemeral.selectedReach),{},{clickCoords:n,loading:!0,intersect:void 0})}),k().then((function(e){return _.api.apiCall(p,e,_.graphql.queries.geoRecord,{lngLat:n}).then((function(e){return I(e.data.geoRecord)}))}))):Promise.resolve()}),[k,D,R,I]),L=Object(r.useCallback)((function(e){return R?k().then((function(t){return _.api.apiCall(p,t,_.graphql.queries.record,{id:e}).then((function(e){if(e.data.record)return I(e.data.record);throw new Error("response.data.record not found")})).catch((function(e){var t;u.a.error("DATA::handleSearchSubmit::err:",{err:e}),f("Error retrieving record from database"),D({selectedReach:Object(l.a)(Object(l.a)({},null===(t=N.current)||void 0===t?void 0:t.ephemeral.selectedReach),{},{loading:!1})})}))})):Promise.resolve()}),[k,I,D,R]);return Object(r.useEffect)((function(){var e;R&&!(null===(e=N.current)||void 0===e?void 0:e.ephemeral.selectedReach)&&v.selectedReachId&&L(v.selectedReachId)}),[v,L,R]),R?a.a.createElement(Ae,{error:m,offlineState:v,setOfflineState:E,ephemeralState:j,handleMapClick:A,searchSubmit:L,signOut:T}):a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return x()}},"Logged Out"))},Me=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ge(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var He=n(526),qe=n(63);n(812),n(813);n(814),Object(v.devSetup)(),i.a.render(a.a.createElement(He.a,{basename:"/"},a.a.createElement(qe.a,{path:"*",component:Fe})),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/net_att",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/net_att","/service-worker.js");Me?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ge(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ge(t,e)}))}}()}},[[549,1,2]]]);
//# sourceMappingURL=main.baf5e757.chunk.js.map