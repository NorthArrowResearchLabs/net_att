(this["webpackJsonp@netatt/app"]=this["webpackJsonp@netatt/app"]||[]).push([[0],{201:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&a(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.api=r(n(658)),t.graphql=r(n(676));var i=n(677);Object.defineProperty(t,"typeDefs",{enumerable:!0,get:function(){return i.default}})},510:function(e,t,n){e.exports=n(755)},658:function(e,t,n){"use strict";var a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.authCheck=t.apiCall=void 0;var r,i=o(n(659)),s=n(753),c=o(n(281)),l=o(n(48));t.apiCall=function(e,t,n,a){return i.default({url:e,method:"post",headers:t?{authorization:"Bearer "+t}:null,data:{query:s.print(n),variables:a}}).then((function(e){return e.data})).catch((function(o){throw o.response&&404===o.response.status?new Error("API Url not found: "+e):o.code&&"ECONNREFUSED"===o.code?new Error("Connection refused. Could not contact: '"+e+"'"):(l.default.error({url:e,jwt:t,query:s.print(n),variables:a}),o)}))},t.authCheck=function(e,n){return t.apiCall(e,n,c.default(r||(r=a(["\n            query AuthCall {\n                auth {\n                    loggedIn\n                    userPool\n                    clientId\n                    region\n                }\n            }\n        "],["\n            query AuthCall {\n                auth {\n                    loggedIn\n                    userPool\n                    clientId\n                    region\n                }\n            }\n        "]))),{})}},676:function(e,t,n){"use strict";var a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.queries=t.fragments=void 0;var r,i,s,c,l=o(n(281));t.fragments={record:l.default(r||(r=a(["\n        fragment recordFragment on Record {\n            id\n            ds\n            data\n            __typename\n        }\n    "],["\n        fragment recordFragment on Record {\n            id\n            ds\n            data\n            __typename\n        }\n    "])))},t.queries={geoRecord:l.default(i||(i=a(["\n        query geoRecord($lngLat: [Float]!) {\n            geoRecord(lngLat: $lngLat) {\n                ...recordFragment\n            }\n        }\n        ","\n    "],["\n        query geoRecord($lngLat: [Float]!) {\n            geoRecord(lngLat: $lngLat) {\n                ...recordFragment\n            }\n        }\n        ","\n    "])),t.fragments.record),geoRecordEPSG:l.default(s||(s=a(["\n        query geoRecordEPSG($lngLat: [Float]!, $epsg: Int!) {\n            geoRecordEPSG(lngLat: $lngLat, epsg: $epsg) {\n                ...seriesSummaryFragment\n            }\n        }\n        ","\n    "],["\n        query geoRecordEPSG($lngLat: [Float]!, $epsg: Int!) {\n            geoRecordEPSG(lngLat: $lngLat, epsg: $epsg) {\n                ...seriesSummaryFragment\n            }\n        }\n        ","\n    "])),t.fragments.record),upstreamCatchment:l.default(c||(c=a(["\n        query upstreamCatchment($id: ID!) {\n            upstreamCatchment(id: $id)\n        }\n    "],["\n        query upstreamCatchment($id: ID!) {\n            upstreamCatchment(id: $id)\n        }\n    "])))}},677:function(e,t,n){"use strict";var a=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r,i=o(n(281)).default(r||(r=a(["\n    # Check out the cheat sheet:\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\n\n    schema {\n        query: Query\n        # mutation: Mutation\n    }\n\n    type Query {\n        auth: AuthParams\n\n        geoRecord(lngLat: [Float]!): [Record]\n        geoRecordEPSG(lngLat: [Float]!, epsg: Int!): [Record]\n        upstreamCatchment(id: ID!): String\n        recordGeometry(id: ID!): RecordGeometry\n\n        record(id: ID!, ds: [String]): [Record]\n        records(ids: [ID]!, ds: [String]): [RecordSet]\n    }\n\n    # this schema allows the following mutation:\n    # type Mutation {\n    # signal a deletion of a record\n    # insertRecords(id: [ID]!, ds: String!): [Record]!\n    # deleteRecords(id: [ID]!, ds: String!): [ID]!\n    # wipeDS(ds: String!): String\n    # }\n\n    type RecordGeometry {\n        reach: String\n        catchment: String\n    }\n\n    type AuthParams {\n        loggedIn: Boolean\n        userPool: String\n        clientId: String\n        region: String\n    }\n\n    type RecordSet {\n        id: ID!\n        records: [Record]\n    }\n\n    type Record {\n        id: ID!\n        ds: String\n        data: String\n    }\n"],["\n    # Check out the cheat sheet:\n    # https://raw.githubusercontent.com/sogko/graphql-shorthand-notation-cheat-sheet/master/graphql-shorthand-notation-cheat-sheet.png\n\n    schema {\n        query: Query\n        # mutation: Mutation\n    }\n\n    type Query {\n        auth: AuthParams\n\n        geoRecord(lngLat: [Float]!): [Record]\n        geoRecordEPSG(lngLat: [Float]!, epsg: Int!): [Record]\n        upstreamCatchment(id: ID!): String\n        recordGeometry(id: ID!): RecordGeometry\n\n        record(id: ID!, ds: [String]): [Record]\n        records(ids: [ID]!, ds: [String]): [RecordSet]\n    }\n\n    # this schema allows the following mutation:\n    # type Mutation {\n    # signal a deletion of a record\n    # insertRecords(id: [ID]!, ds: String!): [Record]!\n    # deleteRecords(id: [ID]!, ds: String!): [ID]!\n    # wipeDS(ds: String!): String\n    # }\n\n    type RecordGeometry {\n        reach: String\n        catchment: String\n    }\n\n    type AuthParams {\n        loggedIn: Boolean\n        userPool: String\n        clientId: String\n        region: String\n    }\n\n    type RecordSet {\n        id: ID!\n        records: [Record]\n    }\n\n    type Record {\n        id: ID!\n        ds: String\n        data: String\n    }\n"])));t.default=i},688:function(e,t){},690:function(e,t){},749:function(e,t,n){},755:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(38),i=n.n(r),s=n(490),c=n(98),l=n(149),d=n(464),u=n(201),p=n(430),m=n(159),_=n(433),g=n(434),h=n(428),f=n(21);const E=Object(p.a)(e=>({root:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(0,1),textShadow:"3px 3px 3px rgba(0,0,0,0.7)",backgroundImage:"url(https://northarrowresearchlabs.github.io/riverscapes/HeaderBackground.png)",backgroundRepeat:"no-repeat",backgroundPosition:"0% 50%",backgroundSize:"cover",backgroundColor:"#444444"},logo:{height:40,width:40,marginRight:e.spacing(2)},programChooser:{margin:e.spacing(0,1),color:e.palette.primary.contrastText,"& svg":{color:e.palette.primary.contrastText},"&:before":{borderColor:e.palette.primary.contrastText},"&:after":{borderColor:e.palette.primary.contrastText}},transparent:{backgroundColor:"transparent",background:"none",color:e.palette.text.primary},search:{position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(f.d)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(f.d)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%",flexGrow:1,[e.breakpoints.up("sm")]:{marginLeft:e.spacing(3),width:"auto"}},searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},spacer:{flexGrow:1},inputInput:{padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%",[e.breakpoints.up("sm")]:{width:200}},sectionDesktop:{display:"none",[e.breakpoints.up("sm")]:{display:"flex",flexGrow:1}},sectionMobile:{display:"flex",flexGrow:1,[e.breakpoints.up("sm")]:{display:"none"}}}));var P=({title:e})=>{const t=E();return o.a.createElement(o.a.Fragment,null,o.a.createElement(g.a,{position:"static"},o.a.createElement(_.a,{className:t.root,disableGutters:!0},o.a.createElement("a",{href:"http://riverscapes.xyz/"},o.a.createElement("img",{className:t.logo,src:"https://riverscapes.xyz/assets/images/RiverscapesLogo.png",alt:"logo"})),o.a.createElement(h.a,{variant:"subtitle1"},e),o.a.createElement("div",{className:t.spacer}))))},O=n(178),A=n(48),C=n.n(A);const b="pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",y="https://64ggxqpm82.execute-api.us-west-2.amazonaws.com/prod/api";Object({NODE_ENV:"production",PUBLIC_URL:"/net_att",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_RS_TILES_CDN:"https://d2hsyhl6qlaiyu.cloudfront.net",REACT_APP_RS_CDN:"https://d18emzkyqtselk.cloudfront.net",REACT_APP_GRAPHQL:"https://64ggxqpm82.execute-api.us-west-2.amazonaws.com/prod/api",REACT_APP_AWS_REGION:"us-west-2",REACT_APP_COGNITO_USER_POOL_ID:"us-west-2_e7COHULVp",REACT_APP_COGNITO_CLIENT_ID:"4j2m8a80sd7l7mu5a9g7udq6bg",REACT_APP_HOSTED_DOMAIN:"riverscapes-dev.auth.us-west-2.amazoncognito.com",REACT_APP_VERSION:"0.1.1",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com"}).REACT_APP_CDN,Object({NODE_ENV:"production",PUBLIC_URL:"/net_att",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_RS_TILES_CDN:"https://d2hsyhl6qlaiyu.cloudfront.net",REACT_APP_RS_CDN:"https://d18emzkyqtselk.cloudfront.net",REACT_APP_GRAPHQL:"https://64ggxqpm82.execute-api.us-west-2.amazonaws.com/prod/api",REACT_APP_AWS_REGION:"us-west-2",REACT_APP_COGNITO_USER_POOL_ID:"us-west-2_e7COHULVp",REACT_APP_COGNITO_CLIENT_ID:"4j2m8a80sd7l7mu5a9g7udq6bg",REACT_APP_HOSTED_DOMAIN:"riverscapes-dev.auth.us-west-2.amazoncognito.com",REACT_APP_VERSION:"0.1.1",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com"}).REACT_APP_BASEURL;Object({NODE_ENV:"production",PUBLIC_URL:"/net_att",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_RS_TILES_CDN:"https://d2hsyhl6qlaiyu.cloudfront.net",REACT_APP_RS_CDN:"https://d18emzkyqtselk.cloudfront.net",REACT_APP_GRAPHQL:"https://64ggxqpm82.execute-api.us-west-2.amazonaws.com/prod/api",REACT_APP_AWS_REGION:"us-west-2",REACT_APP_COGNITO_USER_POOL_ID:"us-west-2_e7COHULVp",REACT_APP_COGNITO_CLIENT_ID:"4j2m8a80sd7l7mu5a9g7udq6bg",REACT_APP_HOSTED_DOMAIN:"riverscapes-dev.auth.us-west-2.amazoncognito.com",REACT_APP_VERSION:"0.1.1",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com"}).REACT_APP_BASENAME,Object({NODE_ENV:"production",PUBLIC_URL:"/net_att",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_RS_TILES_CDN:"https://d2hsyhl6qlaiyu.cloudfront.net",REACT_APP_RS_CDN:"https://d18emzkyqtselk.cloudfront.net",REACT_APP_GRAPHQL:"https://64ggxqpm82.execute-api.us-west-2.amazonaws.com/prod/api",REACT_APP_AWS_REGION:"us-west-2",REACT_APP_COGNITO_USER_POOL_ID:"us-west-2_e7COHULVp",REACT_APP_COGNITO_CLIENT_ID:"4j2m8a80sd7l7mu5a9g7udq6bg",REACT_APP_HOSTED_DOMAIN:"riverscapes-dev.auth.us-west-2.amazoncognito.com",REACT_APP_VERSION:"0.1.1",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com"}).REACT_APP_DOMAIN;const R={REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_VERSION:"0.1.1",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com",REACT_APP_GRAPHQL:"https://64ggxqpm82.execute-api.us-west-2.amazonaws.com/prod/api"};Object.keys(R).forEach(e=>{R[e]||C.a.error("You must set environment variable: ".concat(e))});Object({NODE_ENV:"production",PUBLIC_URL:"/net_att",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoicmF5Y2hhc2VyIiwiYSI6IlFHWHVMSW8ifQ.emd44Ibp4cmT9YXitY1ziw",REACT_APP_RS_TILES_CDN:"https://d2hsyhl6qlaiyu.cloudfront.net",REACT_APP_RS_CDN:"https://d18emzkyqtselk.cloudfront.net",REACT_APP_GRAPHQL:"https://64ggxqpm82.execute-api.us-west-2.amazonaws.com/prod/api",REACT_APP_AWS_REGION:"us-west-2",REACT_APP_COGNITO_USER_POOL_ID:"us-west-2_e7COHULVp",REACT_APP_COGNITO_CLIENT_ID:"4j2m8a80sd7l7mu5a9g7udq6bg",REACT_APP_HOSTED_DOMAIN:"riverscapes-dev.auth.us-west-2.amazoncognito.com",REACT_APP_VERSION:"0.1.1",REACT_APP_CONTACT_EMAIL:"info@northarrowresearch.com"}).REACT_APP_GA_TOKEN;const S=new URL("/net_att/",window.location.origin),T={Auth:{region:"us-west-2",userPoolId:"us-west-2_e7COHULVp",userPoolWebClientId:"4j2m8a80sd7l7mu5a9g7udq6bg",mandatorySignIn:!0,oauth:{domain:"riverscapes-dev.auth.us-west-2.amazoncognito.com",scope:["email","profile","openid"],redirectSignIn:S.toString(),redirectSignOut:S.toString(),responseType:"code"}}};var w=n(486),I=n.n(w),v=n(488),N=n.n(v),D=n(487),L=n.n(D),j=n(116);const k=Object(p.a)(e=>({root:{},icon:{zIndex:100,width:20,height:20,position:"absolute",top:"50%",left:"50%",textAlign:"center",transformOrigin:"50% 50%",transform:"translateY(-50%) translateX(-50%)"}}));var x=({latLng:e,Icon:t,align:n})=>{const a=k(),r={};if(n){switch(n[0]){case"bottom":r.transform="translateY(-100%)";break;case"top":r.transform="translateY(0%)";break;case"center":r.transform="translateY(-50%)";break;default:throw new Error("Must specify vertical placement of align")}switch(n[1]){case"left":r.transform+=" translateX(0%)";break;case"right":r.transform+=" translateX(-100%)";break;case"center":r.transform+=" translateX(-50%)";break;default:throw new Error("Must specify horizontal placement of align")}}return o.a.createElement(j.Marker,{className:a.root,longitude:e[0],latitude:e[1]},o.a.createElement("div",{className:a.root},o.a.createElement(t,{className:a.icon,style:r})))};var F=({vectorTiles:e,clickMarker:t,upstreamPoly:n,handleMapClick:r})=>{const i=Object(a.useState)(0),s=Object(l.a)(i,2),d=s[0],u=s[1],p=Object(a.useRef)(),m=Object(a.useRef)(),_=Object(a.useMemo)(()=>e?Object(O.combineStyles)(O.MapStyles[d].style,(e=>{C.a.info("VECTORTILES",e);const t=Object.keys(e).reduce((t,n)=>{const a=e[n];return Object(c.a)(Object(c.a)({},t),{},{[a.sourceName]:{tiles:[a.url],type:"vector",minzoom:a.minZoom,maxzoom:a.maxZoom,bounds:a.bounds}})},{}),n=[{id:"NHDFlowlines_lines",type:"line",source:e.NHDFlowline.sourceName,"source-layer":"NHDFlowlines",minzoom:e.NHDFlowline.minZoom,maxzoom:14.5,layout:{visibility:"visible"},paint:{"line-opacity":["interpolate",["linear"],["zoom"],e.NHDFlowline.minZoom,0,8,1],"line-width":["interpolate",["linear"],["zoom"],e.NHDFlowline.minZoom,.5,14,4],"line-color":["match",["get","NHDPlusID"],[-1],"#FFFF00",["step",["get","FType"],"#FF0000",460,"#0000FF"]]}}];return{version:8,name:"Outdoors",metadata:{"mapbox:type":"default","mapbox:origin":"outdoors-v11","mapbox:autocomposite":!0,"mapbox:groups":{},"mapbox:sdk-support":{js:"0.50.0",android:"6.7.0",ios:"4.6.0"}},sources:Object(c.a)({},t),sprite:"mapbox://sprites/pipbailey/cjvfq2uwm0vqk1foby0dtwdmk/ayuihl2d38ufkjhmu0pwx0cto",glyphs:"mapbox://fonts/pipbailey/{fontstack}/{range}.pbf",layers:[...n],created:"2019-05-08T21:16:06.811Z",id:"cjvfq2uwm0vqk1foby0dtwdmk",modified:"2019-05-08T22:02:34.939Z",owner:"pipbailey",visibility:"private",draft:!1}})(e)):null,[d,e]),g=t&&t.intLngLat?{type:"Feature",properties:{percentile:0},geometry:{type:"LineString",coordinates:[t.lngLat,t.intLngLat]}}:null,h=n?{type:"Feature",properties:{},geometry:n}:null;return o.a.createElement(O.BaseMap,{mapBoxToken:b,reactMapGLProps:{clickRadius:2,maxZoom:14,minZoom:6,onClick:r},bounds:e.NHDFlowline.bounds,showMe:!0,viewport:{zoom:e.NHDFlowline.zoom||12,latitude:44.2983897312401,longitude:-114.374749399575},onViewportChange:({viewport:{latitude:e,longitude:t,zoom:n},size:a,projection:o,map:r})=>{p.current||(p.current=r),m.current=n,console.log("zoom",e,t,n)},mapStyles:[{style:_}]},t&&o.a.createElement(x,{latLng:t.lngLat,Icon:t.loading?I.a:L.a,align:["bottom","center"]}),t&&t.intLngLat&&o.a.createElement(x,{latLng:t.intLngLat,Icon:N.a}),g&&o.a.createElement(j.Source,{type:"geojson",data:g},o.a.createElement(j.Layer,{id:"data",type:"line",paint:{"line-color":"#FF0090","line-opacity":1,"line-width":3}})),h&&o.a.createElement(j.Source,{type:"geojson",data:h},o.a.createElement(j.Layer,{id:"upstream_fill",type:"fill",paint:{"fill-opacity":["interpolate",["linear"],["zoom"],6,.2,14,.2],"fill-color":"#9933ff"}})),h&&o.a.createElement(j.Source,{type:"geojson",data:h},o.a.createElement(j.Layer,{id:"upstream_line",type:"line",paint:{"line-color":"#9933ff","line-opacity":1,"line-width":3}})),o.a.createElement(O.StyleButtons,{controlPadding:{},currStyle:d,mapStyles:O.MapStyles,setCurrStyle:e=>u(e)}))},H=n(312),M=n(808),q=n(809),z=n(810),W=n(811),G=n(812),V=n(813),Y=n(193),U=n(292),B=n.n(U);const K=["ogc_fid","enabled","wbarea_permanent_identifier","visibilityfilter","gnis_id","gnis_name"],Q=["nhdplusid","vpuid","reachcode","permanent_identifier"],X=Object(p.a)(e=>({root:{height:"100%",overflow:"hidden",userSelect:"text"},table:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},tableHead:{flex:"0 0"},tableBody:{flex:"1 1",border:"1px solid red",overflow:"scroll"},tableCell:{}}));var $=({data:e})=>{const t=X();return o.a.createElement(W.a,{component:H.a,className:t.root},o.a.createElement(M.a,{className:t.table,"aria-label":"simple table"},o.a.createElement(G.a,{className:t.tableHead},o.a.createElement(V.a,null,o.a.createElement(z.a,{className:t.tableCell},"Field"),o.a.createElement(z.a,{align:"right",className:t.tableCell},"Value"))),o.a.createElement(q.a,{className:t.tableBody},Object.keys(e).filter(e=>-1===K.indexOf(e)).map((n,a)=>o.a.createElement(V.a,{key:"".concat(n,"-").concat(a)},o.a.createElement(z.a,{component:"th",scope:"row",className:t.tableCell},n.replace(/_/g," ")),o.a.createElement(z.a,{align:"right",className:t.tableCell},function(e,t){return null===t||void 0===t?o.a.createElement("em",null,"n/a"):Q.indexOf(e)>-1?o.a.createElement("code",null,t):Y.util.isNumeric(t)?"spheroid_dist"===e?B()(t).format("0.00000"):Y.util.formatNum(t):t.toString()}(n,e[n])))))))};const J=Object(p.a)(e=>({appFrame:{height:"100%"},parentContainer:{display:"flex",flexDirection:"row",height:"100%",overflow:"hidden"},mapContainer:{flex:"1 1 75%"},drawerContainer:{flex:"0 0 25%",wordWrap:"break-word",maxWidth:"25%"}}));var Z=({loading:e,vectorTiles:t,clickMarker:n,handleMapClick:a,upstreamPoly:r})=>{const i=J();return e||!t?o.a.createElement("div",null,"loading..."):o.a.createElement(m.AppFrame,{className:i.appFrame,topbar:o.a.createElement(P,{title:"Network Attributes"}),fullWidth:!0,noScroll:!0},o.a.createElement("div",{className:i.parentContainer},n&&n.jsonData&&o.a.createElement("div",{id:"drawer-container",className:i.drawerContainer},o.a.createElement($,{data:n.jsonData})),o.a.createElement("div",{className:i.mapContainer},o.a.createElement(F,{vectorTiles:t,clickMarker:n,handleMapClick:a,upstreamPoly:r}))))};var ee=({location:e,history:t})=>{const n=Object(a.useState)(!0),r=Object(l.a)(n,2),i=r[0],p=r[1],m=Object(a.useState)(),_=Object(l.a)(m,2),g=_[0],h=_[1],f=Object(a.useState)(),E=Object(l.a)(f,2),P=E[0],O=E[1],A=Object(a.useState)(),b=Object(l.a)(A,2),R=b[0],S=b[1],w=Object(a.useRef)();w.current=P;const I=Object(d.useHosted)(T,!1,!1),v=I.isAuthenticated,N=(I.isAuthComplete,I.getCurrentToken),D=I.signIn;I.signOut,I.user;Object(a.useEffect)(()=>{if(!i)return;const e="".concat("https://d2hsyhl6qlaiyu.cloudfront.net","/").concat("NET_ATT/BLM/NHDFlowline","/metadata.json");C.a.info("URL",e),fetch(e).then(e=>e.json()).then(e=>(e.bounds=JSON.parse("[".concat(e.bounds,"]")),e.center=JSON.parse("[".concat(e.center,"]")),Object(c.a)(Object(c.a)({},e),{},{sourceName:"NHDFlowline",url:"".concat("https://d2hsyhl6qlaiyu.cloudfront.net","/").concat("NET_ATT/BLM/NHDFlowline","/{z}/{x}/{y}.pbf"),json:JSON.parse(e.json),zoom:14,minZoom:parseInt(e.minzoom,10),maxZoom:parseInt(e.maxzoom,10),longitude:e.center[0],latitude:e.center[1]}))).then(e=>{C.a.debug("RESP",e),h(Object(c.a)(Object(c.a)({},g),{},{NHDFlowline:e})),p(!1)}).catch(e=>{console.log("DATA::fetch_tile::err:",e)})},[i,g]);return v?o.a.createElement(Z,{loading:i,vectorTiles:g,clickMarker:P,handleMapClick:({lngLat:e},t)=>{O({lngLat:e,loading:!0,intLngLat:void 0,jsonData:{}}),N().then(n=>u.api.apiCall(y,n,u.graphql.queries.geoRecord,{lngLat:e}).then(n=>{try{C.a.debug("Return Value",n);const e=JSON.parse(n.data.geoRecord[0].data)[0],a=e.cp_line_pt,o=(e.geom,e.pt,Object(s.a)(e,["cp_line_pt","geom","pt"])),r=a.match(/POINT\(([0-9-.]+)\s+([0-9-.]+)\)/).slice(-2).map(parseFloat);if(t){const e=t,n=e.getLayer("NHDFlowlines_lines").getPaintProperty("line-color");n[2]=[o.nhdplusid],C.a.debug("RETURN",{newPt:r,cpLinePt:a,jsonData:o,lineColor:n}),e.setPaintProperty("NHDFlowlines_lines","line-color",n)}const i=Date.now();u.api.apiCall(y,null,u.graphql.queries.upstreamCatchment,{id:o.nhdplusid}).then(e=>{C.a.debug("upstreamCatchment",(Date.now()-i)/1e3,e),S(JSON.parse(e.data.upstreamCatchment))}).catch(e=>{C.a.error("upstreamCatchment ERROR",(Date.now()-i)/1e3,e),C.a.error("ERROR UpstreamCatchment API Call",e)}),O(Object(c.a)(Object(c.a)({},w.current),{},{loading:!1,intLngLat:r,jsonData:o}))}catch(a){C.a.error(a,e)}}))},upstreamPoly:R}):o.a.createElement("div",null,o.a.createElement("button",{onClick:()=>D()},"Logged Out"))};const te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}var ae=n(489),oe=n(60);n(748),n(749);n(750),Object(m.devSetup)(),i.a.render(o.a.createElement(ae.a,{basename:"/"},o.a.createElement(oe.a,{path:"*",component:ee})),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/net_att",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat("/net_att","/service-worker.js");te?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(n=>{const a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):ne(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ne(t,e)})}}()}},[[510,1,2]]]);
//# sourceMappingURL=main.5944e753.chunk.js.map